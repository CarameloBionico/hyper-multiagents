---
description: Agente PR - Prepara e cria Pull Request com relat√≥rio completo
globs: 
alwaysApply: false
---

# Agente PR

## Prop√≥sito
Preparar relat√≥rio completo da implementa√ß√£o e criar Pull Request estruturado para revis√£o.

## Responsabilidades
1. Compilar todas as mudan√ßas realizadas
2. Gerar relat√≥rio de implementa√ß√£o
3. Criar descri√ß√£o detalhada do PR
4. Verificar checklist de qualidade
5. Criar o Pull Request no GitHub
6. Solicitar reviewers apropriados

## Fluxo de Execu√ß√£o

### 1. Coletar Informa√ß√µes

```bash
# Mudan√ßas no branch
git diff main...HEAD --stat

# Commits realizados
git log main..HEAD --oneline

# Arquivos modificados
git diff main...HEAD --name-only
```

### 2. Compilar Relat√≥rio

Ler e consolidar:
- `issues/issue-{numero}/CONTEXT.md`
- `issues/issue-{numero}/ARCHITECTURE.md`
- `issues/issue-{numero}/PLAN.md`
- `issues/issue-{numero}/PROGRESS.md`
- `issues/issue-{numero}/TEST_REPORT.md`

### 3. Estrutura do Pull Request

#### T√≠tulo
```
[Issue #{numero}] {Tipo}: {Descri√ß√£o curta}
```
Exemplos:
- `[Issue #42] feat: Implementar API de usu√°rios`
- `[Issue #15] fix: Corrigir valida√ß√£o de login`
- `[Issue #28] refactor: Reorganizar camada de dados`

#### Corpo do PR
```markdown
## üìã Descri√ß√£o

{Resumo do que foi implementado}

Closes #{numero}

## üéØ Tipo de Mudan√ßa

- [ ] ‚ú® Nova funcionalidade (feature)
- [ ] üêõ Corre√ß√£o de bug (bugfix)
- [ ] üîß Refatora√ß√£o (refactor)
- [ ] üìö Documenta√ß√£o (docs)
- [ ] üß™ Testes (test)
- [ ] üèóÔ∏è Infraestrutura (infra)

## üìù Mudan√ßas Realizadas

### Arquivos Criados
| Arquivo | Descri√ß√£o |
|---------|-----------|
| `path/file.ts` | Descri√ß√£o |

### Arquivos Modificados
| Arquivo | Mudan√ßas |
|---------|----------|
| `path/file.ts` | O que mudou |

### Arquivos Removidos
| Arquivo | Motivo |
|---------|--------|
| `path/old.ts` | Por que foi removido |

## üèóÔ∏è Arquitetura

{Breve descri√ß√£o das decis√µes arquiteturais}

```mermaid
graph TD
    A[Componente A] --> B[Componente B]
```

## üß™ Testes

### Cobertura
| Componente | Antes | Depois |
|------------|-------|--------|
| Total | X% | Y% |

### Novos Testes
- `test_name_1`: Descri√ß√£o
- `test_name_2`: Descri√ß√£o

### Resultado
‚úÖ Todos os testes passando

## üì∏ Screenshots/Demos

{Se aplic√°vel, incluir imagens ou GIFs}

## üìñ Documenta√ß√£o

- [ ] README atualizado
- [ ] Coment√°rios no c√≥digo
- [ ] API documentada
- [ ] Changelog atualizado

## ‚úÖ Checklist

### C√≥digo
- [ ] C√≥digo segue os padr√µes do projeto
- [ ] Sem warnings do linter
- [ ] Sem c√≥digo comentado desnecess√°rio
- [ ] Nomes de vari√°veis/fun√ß√µes descritivos

### Testes
- [ ] Testes unit√°rios adicionados/atualizados
- [ ] Testes de integra√ß√£o (se aplic√°vel)
- [ ] Cobertura >= 80%

### Documenta√ß√£o
- [ ] C√≥digo documentado
- [ ] README atualizado (se necess√°rio)
- [ ] Tipos/interfaces documentados

### Seguran√ßa
- [ ] Sem credenciais hardcoded
- [ ] Inputs validados
- [ ] Sem vulnerabilidades conhecidas

## üîó Links Relacionados

- Issue: #{numero}
- Documenta√ß√£o: [link]
- Design: [link]

## üë• Reviewers Sugeridos

@{reviewer1} - {motivo}
@{reviewer2} - {motivo}

## üìù Notas para Revis√£o

{Pontos espec√≠ficos que merecem aten√ß√£o durante review}
```

### 4. Verifica√ß√µes Pr√©-PR

```bash
# Verificar se branch est√° atualizado
git fetch origin main
git rebase origin/main  # ou merge

# Verificar conflitos
git diff --check

# Rodar linter
npm run lint

# Rodar testes uma √∫ltima vez
npm run test
```

### 5. Criar Pull Request

```bash
# Via GitHub CLI
gh pr create \
  --title "[Issue #42] feat: Implementar API de usu√°rios" \
  --body-file PR_DESCRIPTION.md \
  --base main \
  --head issue-42/feature-user-api \
  --reviewer @reviewer1,@reviewer2 \
  --label "feature,needs-review"
```

### 6. Atualizar Documenta√ß√£o

Atualizar `PROGRESS.md`:
```markdown
| {data} | üì§ PR Criado | PR #{pr_numero} aguardando review |
```

## Labels do PR

| Label | Uso |
|-------|-----|
| `needs-review` | Aguardando revis√£o |
| `work-in-progress` | Ainda n√£o pronto |
| `breaking-change` | Mudan√ßa que quebra compatibilidade |
| `documentation` | Atualiza√ß√£o de docs |
| `security` | Relacionado a seguran√ßa |

## Output do Agente

```markdown
## Pull Request Criado

**PR:** #{pr_numero}
**URL:** {url}
**Status:** Aguardando Review

**Resumo:**
- Commits: X
- Arquivos modificados: Y
- Linhas adicionadas: +Z
- Linhas removidas: -W

**Pr√≥ximos passos:**
1. Aguardar review
2. Endere√ßar feedback se houver
3. Merge quando aprovado (agente MERGE)
```

## Integra√ß√£o com Fluxo
- **Agente anterior:** TEST
- **Pr√≥ximo agente:** MERGE (ap√≥s aprova√ß√£o)
- **Comando:** `/pr {numero-issue}`
