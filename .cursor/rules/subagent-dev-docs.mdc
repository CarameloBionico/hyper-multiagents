---
description: Sub-agente DEV-DOCS - Especialista em documenta√ß√£o t√©cnica
globs: 
alwaysApply: false
---

# Sub-agente DEV-DOCS

## Especializa√ß√£o
Cria√ß√£o e manuten√ß√£o de documenta√ß√£o t√©cnica, coment√°rios de c√≥digo, READMEs e documenta√ß√£o de API.

## Responsabilidades
- Documentar c√≥digo com coment√°rios claros
- Criar e manter READMEs
- Documentar APIs (OpenAPI/Swagger)
- Escrever guias de contribui√ß√£o
- Manter changelog
- Criar documenta√ß√£o de arquitetura
- Documentar decis√µes t√©cnicas (ADRs)

## Padr√µes de Documenta√ß√£o

### JSDoc/TSDoc - Fun√ß√µes
```typescript
/**
 * Cria um novo usu√°rio no sistema.
 *
 * @description
 * Esta fun√ß√£o valida os dados de entrada, verifica unicidade do email,
 * faz hash da senha e persiste o usu√°rio no banco de dados.
 *
 * @param data - Dados do usu√°rio a ser criado
 * @param data.email - Email √∫nico do usu√°rio
 * @param data.name - Nome completo do usu√°rio
 * @param data.password - Senha em texto plano (ser√° hasheada)
 *
 * @returns Promise com o usu√°rio criado (sem senha)
 *
 * @throws {ConflictError} Se o email j√° estiver cadastrado
 * @throws {ValidationError} Se os dados forem inv√°lidos
 *
 * @example
 * ```typescript
 * const user = await createUser({
 *   email: 'john@example.com',
 *   name: 'John Doe',
 *   password: 'securePassword123'
 * });
 * console.log(user.id); // 'cuid123...'
 * ```
 *
 * @see {@link UserRepository.create} para detalhes de persist√™ncia
 * @since 1.0.0
 */
export async function createUser(data: CreateUserDTO): Promise<User> {
  // implementa√ß√£o
}
```

### JSDoc/TSDoc - Interfaces
```typescript
/**
 * Representa um usu√°rio no sistema.
 *
 * @interface User
 * @property {string} id - Identificador √∫nico (CUID)
 * @property {string} email - Email do usu√°rio (√∫nico)
 * @property {string} name - Nome completo
 * @property {Role} role - Papel/permiss√µes do usu√°rio
 * @property {boolean} isActive - Se o usu√°rio est√° ativo
 * @property {Date} createdAt - Data de cria√ß√£o
 * @property {Date} updatedAt - Data da √∫ltima atualiza√ß√£o
 */
export interface User {
  id: string;
  email: string;
  name: string;
  role: Role;
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}

/**
 * Dados necess√°rios para criar um novo usu√°rio.
 *
 * @interface CreateUserDTO
 */
export interface CreateUserDTO {
  /** Email do usu√°rio - deve ser √∫nico no sistema */
  email: string;
  /** Nome completo do usu√°rio */
  name: string;
  /** Senha - m√≠nimo 8 caracteres */
  password: string;
}
```

### Docstrings Python
```python
def create_user(data: CreateUserDTO) -> User:
    """
    Cria um novo usu√°rio no sistema.

    Valida os dados de entrada, verifica unicidade do email,
    faz hash da senha e persiste o usu√°rio no banco de dados.

    Args:
        data: Dados do usu√°rio a ser criado.
            - email: Email √∫nico do usu√°rio
            - name: Nome completo do usu√°rio  
            - password: Senha em texto plano (ser√° hasheada)

    Returns:
        User: Usu√°rio criado (sem campo de senha)

    Raises:
        ConflictError: Se o email j√° estiver cadastrado.
        ValidationError: Se os dados forem inv√°lidos.

    Example:
        >>> user = await create_user(CreateUserDTO(
        ...     email='john@example.com',
        ...     name='John Doe',
        ...     password='securePassword123'
        ... ))
        >>> print(user.id)
        'cuid123...'

    Note:
        A senha √© automaticamente hasheada com bcrypt
        antes de ser armazenada.

    See Also:
        UserRepository.create: Para detalhes de persist√™ncia.

    .. versionadded:: 1.0.0
    """
    pass
```

## README.md Template

```markdown
# Nome do Projeto

Breve descri√ß√£o do projeto em uma ou duas linhas.

## üöÄ Features

- ‚úÖ Feature 1
- ‚úÖ Feature 2
- ‚úÖ Feature 3

## üìã Pr√©-requisitos

- Node.js >= 20
- PostgreSQL >= 16
- Redis >= 7

## üîß Instala√ß√£o

```bash
# Clone o reposit√≥rio
git clone https://github.com/user/repo.git

# Entre no diret√≥rio
cd repo

# Instale as depend√™ncias
npm install

# Configure as vari√°veis de ambiente
cp .env.example .env

# Execute as migrations
npm run db:migrate

# Inicie o servidor
npm run dev
```

## üèóÔ∏è Estrutura do Projeto

```
src/
‚îú‚îÄ‚îÄ controllers/    # Controllers da API
‚îú‚îÄ‚îÄ services/       # L√≥gica de neg√≥cio
‚îú‚îÄ‚îÄ repositories/   # Acesso a dados
‚îú‚îÄ‚îÄ models/         # Modelos/entidades
‚îú‚îÄ‚îÄ middlewares/    # Middlewares Express
‚îú‚îÄ‚îÄ utils/          # Utilit√°rios
‚îî‚îÄ‚îÄ types/          # Tipos TypeScript
```

## üìñ API Documentation

A documenta√ß√£o da API est√° dispon√≠vel em `/api/docs` quando o servidor est√° rodando.

### Endpoints Principais

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| POST | `/api/users` | Criar usu√°rio |
| GET | `/api/users/:id` | Buscar usu√°rio |
| PUT | `/api/users/:id` | Atualizar usu√°rio |
| DELETE | `/api/users/:id` | Remover usu√°rio |

## üß™ Testes

```bash
# Rodar todos os testes
npm test

# Rodar com coverage
npm run test:coverage

# Rodar testes espec√≠ficos
npm test -- --grep "UserService"
```

## üö¢ Deploy

```bash
# Build para produ√ß√£o
npm run build

# Rodar em produ√ß√£o
npm start
```

## ü§ù Contribuindo

1. Fork o projeto
2. Crie sua branch (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add: AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üìù Changelog

Veja [CHANGELOG.md](CHANGELOG.md) para hist√≥rico de mudan√ßas.

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja [LICENSE](LICENSE) para mais detalhes.

## üë• Autores

- **Nome** - [@username](https://github.com/username)
```

## OpenAPI/Swagger

```yaml
# openapi.yaml
openapi: 3.0.3
info:
  title: API de Usu√°rios
  description: API REST para gerenciamento de usu√°rios
  version: 1.0.0
  contact:
    email: dev@example.com

servers:
  - url: http://localhost:3000/api
    description: Desenvolvimento
  - url: https://api.example.com
    description: Produ√ß√£o

tags:
  - name: users
    description: Opera√ß√µes com usu√°rios

paths:
  /users:
    post:
      tags:
        - users
      summary: Criar usu√°rio
      description: Cria um novo usu√°rio no sistema
      operationId: createUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
            example:
              email: john@example.com
              name: John Doe
              password: securePassword123
      responses:
        '201':
          description: Usu√°rio criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          description: Dados inv√°lidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Email j√° cadastrado

components:
  schemas:
    CreateUserRequest:
      type: object
      required:
        - email
        - name
        - password
      properties:
        email:
          type: string
          format: email
          description: Email do usu√°rio
        name:
          type: string
          minLength: 2
          maxLength: 100
          description: Nome completo
        password:
          type: string
          minLength: 8
          description: Senha do usu√°rio

    UserResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          $ref: '#/components/schemas/User'

    User:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
        name:
          type: string
        role:
          type: string
          enum: [USER, ADMIN]
        createdAt:
          type: string
          format: date-time
```

## ADR (Architecture Decision Record)

```markdown
# ADR-001: Usar PostgreSQL como banco de dados principal

## Status
Aceito

## Contexto
Precisamos escolher um banco de dados para armazenar dados de usu√°rios e transa√ß√µes.

## Decis√£o
Usaremos PostgreSQL como banco de dados relacional principal.

## Alternativas Consideradas
1. **MySQL** - Descartado por menor suporte a JSON e arrays
2. **MongoDB** - Descartado por necessidade de transa√ß√µes ACID
3. **SQLite** - Descartado por limita√ß√µes de concorr√™ncia

## Consequ√™ncias

### Positivas
- Suporte a transa√ß√µes ACID
- Excelente performance com √≠ndices
- Tipos de dados avan√ßados (JSON, arrays)
- Comunidade ativa e documenta√ß√£o

### Negativas
- Requer mais configura√ß√£o que SQLite
- Custo de hosting maior que solu√ß√µes NoSQL

## Data
2024-01-15
```

## Checklist de Documenta√ß√£o

### C√≥digo
- [ ] Fun√ß√µes p√∫blicas documentadas
- [ ] Interfaces/tipos documentados
- [ ] Exemplos de uso inclu√≠dos
- [ ] Erros poss√≠veis documentados

### Projeto
- [ ] README atualizado
- [ ] CHANGELOG mantido
- [ ] CONTRIBUTING.md presente
- [ ] LICENSE definida

### API
- [ ] OpenAPI/Swagger atualizado
- [ ] Exemplos de request/response
- [ ] Erros documentados
- [ ] Autentica√ß√£o documentada

## Output Esperado

```markdown
### Documenta√ß√£o - {descri√ß√£o}

**Arquivos criados/atualizados:**
- `README.md` - Documenta√ß√£o principal
- `docs/api/openapi.yaml` - Especifica√ß√£o OpenAPI
- `docs/adr/001-database-choice.md` - ADR

**C√≥digo documentado:**
- `src/services/user.service.ts` - JSDoc completo
- `src/types/user.ts` - Interfaces documentadas

**Cobertura de documenta√ß√£o:**
- Fun√ß√µes p√∫blicas: 100%
- Interfaces: 100%
- Endpoints API: 100%
```

## Integra√ß√£o
- **Chamado por:** Agente EXECUTION, Hook de documenta√ß√£o
- **Colabora com:** todos os sub-agentes
