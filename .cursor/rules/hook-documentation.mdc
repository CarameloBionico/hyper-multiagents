---
description: Hook de Documenta√ß√£o - Verifica e completa documenta√ß√£o ap√≥s cada tarefa
globs: 
alwaysApply: false
---

# Hook de Documenta√ß√£o

## Prop√≥sito
Garantir que todo c√≥digo inserido ou modificado esteja adequadamente documentado.

## Quando √© Executado
- Ap√≥s cada tarefa conclu√≠da pelo agente EXECUTION
- Antes de cada commit de tarefa
- Pode ser chamado manualmente

## Fluxo de Verifica√ß√£o

### 1. Identificar Arquivos Modificados
```bash
git diff --name-only HEAD~1
```

### 2. Para Cada Arquivo

#### Verificar por Tipo de Arquivo

**TypeScript/JavaScript (.ts, .tsx, .js, .jsx)**
```
‚úì Fun√ß√µes exportadas t√™m JSDoc/TSDoc
‚úì Interfaces/Types t√™m descri√ß√£o
‚úì Par√¢metros complexos documentados
‚úì Retornos documentados
‚úì Exce√ß√µes documentadas (@throws)
‚úì Exemplos de uso quando √∫til (@example)
```

**Python (.py)**
```
‚úì Fun√ß√µes/m√©todos t√™m docstrings
‚úì Classes t√™m docstrings
‚úì Par√¢metros documentados (Args:)
‚úì Retornos documentados (Returns:)
‚úì Exce√ß√µes documentadas (Raises:)
‚úì Exemplos quando √∫til (Example:)
```

**Go (.go)**
```
‚úì Fun√ß√µes exportadas (PascalCase) t√™m coment√°rio
‚úì Structs exportados t√™m coment√°rio
‚úì Coment√°rio come√ßa com nome do elemento
```

### 3. Checklist de Verifica√ß√£o

```markdown
## Verifica√ß√£o de Documenta√ß√£o

### Arquivo: {path}

#### Fun√ß√µes/M√©todos
| Fun√ß√£o | JSDoc | Params | Return | Throws | Status |
|--------|-------|--------|--------|--------|--------|
| createUser | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | OK |
| updateUser | ‚ùå | - | - | - | PENDENTE |

#### Interfaces/Types
| Nome | Descri√ß√£o | Props Documentadas | Status |
|------|-----------|-------------------|--------|
| User | ‚úÖ | ‚úÖ | OK |
| CreateUserDTO | ‚ùå | ‚ùå | PENDENTE |

#### Classes
| Classe | Descri√ß√£o | M√©todos Doc | Status |
|--------|-----------|-------------|--------|
| UserService | ‚úÖ | 3/4 | PARCIAL |
```

### 4. Completar Documenta√ß√£o Faltante

Se documenta√ß√£o insuficiente for detectada:

1. **Analisar contexto**
   - Ler c√≥digo da fun√ß√£o/classe
   - Entender prop√≥sito pelo uso
   - Identificar par√¢metros e retornos

2. **Gerar documenta√ß√£o**
   - Criar JSDoc/docstring apropriado
   - Documentar par√¢metros
   - Documentar retorno
   - Adicionar exemplo se √∫til

3. **Aplicar mudan√ßas**
   - Inserir documenta√ß√£o no c√≥digo
   - Manter estilo consistente com projeto

## Padr√µes de Documenta√ß√£o

### Fun√ß√£o Simples
```typescript
/**
 * Calcula o pre√ßo total com desconto aplicado.
 *
 * @param price - Pre√ßo original do item
 * @param discount - Percentual de desconto (0-100)
 * @returns Pre√ßo final ap√≥s desconto
 */
function calculatePrice(price: number, discount: number): number {
  return price * (1 - discount / 100);
}
```

### Fun√ß√£o Complexa
```typescript
/**
 * Cria um novo usu√°rio no sistema.
 *
 * @description
 * Valida os dados de entrada, verifica unicidade do email,
 * faz hash da senha e persiste o usu√°rio no banco de dados.
 *
 * @param data - Dados do usu√°rio
 * @param data.email - Email √∫nico do usu√°rio
 * @param data.name - Nome completo
 * @param data.password - Senha (ser√° hasheada)
 *
 * @returns Usu√°rio criado (sem senha)
 *
 * @throws {ConflictError} Se email j√° existe
 * @throws {ValidationError} Se dados inv√°lidos
 *
 * @example
 * ```typescript
 * const user = await createUser({
 *   email: 'john@example.com',
 *   name: 'John Doe',
 *   password: 'secure123'
 * });
 * ```
 */
async function createUser(data: CreateUserDTO): Promise<User> {
  // ...
}
```

### Interface
```typescript
/**
 * Representa um usu√°rio no sistema.
 *
 * @interface User
 */
interface User {
  /** Identificador √∫nico (CUID) */
  id: string;
  /** Email do usu√°rio (√∫nico) */
  email: string;
  /** Nome completo */
  name: string;
  /** Data de cria√ß√£o */
  createdAt: Date;
}
```

## Crit√©rios de Qualidade

### Documenta√ß√£o M√≠nima Requerida
- [ ] Toda fun√ß√£o/m√©todo exportado tem documenta√ß√£o
- [ ] Toda interface/type exportado tem documenta√ß√£o
- [ ] Toda classe exportada tem documenta√ß√£o
- [ ] Par√¢metros n√£o √≥bvios est√£o documentados
- [ ] Erros poss√≠veis est√£o documentados

### Documenta√ß√£o Ideal
- [ ] Exemplos de uso para fun√ß√µes complexas
- [ ] Links para documenta√ß√£o relacionada (@see)
- [ ] Notas de vers√£o (@since)
- [ ] Avisos quando necess√°rio (@deprecated, @warning)

## Output do Hook

### Sucesso
```
üìù Hook de Documenta√ß√£o - {arquivo}

‚úÖ Documenta√ß√£o verificada e completa

Elementos documentados:
  - 5 fun√ß√µes
  - 3 interfaces
  - 1 classe

Nenhuma a√ß√£o necess√°ria.
```

### Com Corre√ß√µes
```
üìù Hook de Documenta√ß√£o - {arquivo}

‚ö†Ô∏è Documenta√ß√£o incompleta detectada

A√ß√µes realizadas:
  ‚úÖ Adicionado JSDoc: updateUser()
  ‚úÖ Adicionado JSDoc: deleteUser()
  ‚úÖ Documentada interface: UpdateUserDTO

Elementos agora documentados:
  - 5/5 fun√ß√µes ‚úÖ
  - 3/3 interfaces ‚úÖ
  - 1/1 classes ‚úÖ
```

## Configura√ß√£o

### Ignorar Arquivos
Arquivos que n√£o precisam de verifica√ß√£o:
- `*.test.ts` - Arquivos de teste
- `*.spec.ts` - Arquivos de spec
- `*.d.ts` - Arquivos de defini√ß√£o
- `index.ts` - Arquivos barrel
- `*.config.*` - Arquivos de configura√ß√£o

### N√≠vel de Rigor
```yaml
# Configura√ß√£o do hook
documentation:
  level: strict  # strict | moderate | minimal
  
  strict:
    - all_exports_documented
    - all_params_documented
    - all_returns_documented
    - examples_for_complex
    
  moderate:
    - all_exports_documented
    - complex_params_documented
    
  minimal:
    - public_functions_documented
```

## Integra√ß√£o

- **Chamado por:** Agente EXECUTION (ap√≥s cada tarefa)
- **Usa:** Sub-agente @dev-docs para gerar documenta√ß√£o
- **Atualiza:** Arquivos de c√≥digo com documenta√ß√£o
